<!DOCTYPE html>
<html class="writer-html5" lang="zh" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>在大型项目中使用ROS 2launch [待校准@7234] &mdash; ROS 2 documentation  文档</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="canonical" href="https://docs.ros.org/en/Tutorials/Launch/Using-ROS2-Launch-For-Large-Projects.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="tf2教程 [待校准@8078]" href="../Tf2/Tf2-Main.html" />
    <link rel="prev" title="在launch文件中使用事件处理程序 [待校准@7201]" href="Using-Event-Handlers.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> ROS 2 documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Installation.html">安装 [待校准&#64;5690]</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Ubuntu-Development-Setup.html">在Ubuntu Linux上构建ROS 2 [待校准&#64;5886]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Ubuntu-Install-Binary.html">在Ubuntu Linux上安装ROS 2 [待校准&#64;5937]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Ubuntu-Install-Debians.html">通过Debian包安装ROS 2 [待校准&#64;5959]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/macOS-Development-Setup.html">在macOS上构建ROS 2 [待校准&#64;6117]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/macOS-Install-Binary.html">在macOS上安装ROS 2 [待校准&#64;6148]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Windows-Development-Setup.html">在Windows上构建ROS 2 [待校准&#64;5973]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Windows-Install-Binary.html">在Windows上安装ROS 2 [待校准&#64;6050]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Fedora-Development-Setup.html">在Fedora Linux上构建ROS 2 [待校准&#64;5836]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Latest-Development-Setup.html">安装最新的ROS 2开发版本 [待校准&#64;5840]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Maintaining-a-Source-Checkout.html">主源文件检出ROS 2Foxy [待校准&#64;5850]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Testing.html">用于测试的替代安装源 [待校准&#64;5873]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/DDS-Implementations.html">安装DDS实现 [待校准&#64;5717]</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Install-Connext-Security-Plugins.html">安装Connext安全插件 [待校准&#64;5768]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Install-Connext-University-Eval.html">安装大学或RTI Connext DDS的评估版本 [待校准&#64;5782]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Working-with-Eclipse-CycloneDDS.html">使用EclipseCycloneDDS [待校准&#64;5796]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Working-with-GurumNetworks-GurumDDS.html">与GurumNetworks GurumDDS合作 [待校准&#64;5812]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Working-with-eProsima-Fast-DDS.html">与eProsimaFast DDS合作 [待校准&#64;5829]</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Docs-Guide.html">文档指南</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../Tutorials.html">教程 [待校准&#64;6242]</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Configuring-ROS2-Environment.html">配置ROS 2环境 [待校准&#64;6646]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Turtlesim/Introducing-Turtlesim.html">介绍turtlesim和rqt [待校准&#64;8428]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Understanding-ROS2-Nodes.html">了解ROS 2节点 [待校准&#64;8733]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Topics/Understanding-ROS2-Topics.html">理解ROS 2话题 [待校准&#64;8368]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Services/Understanding-ROS2-Services.html">了解ROS 2服务 [待校准&#64;7742]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Parameters/Understanding-ROS2-Parameters.html">理解ROS 2参数 [待校准&#64;7371]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Understanding-ROS2-Actions.html">理解ROS 2动作 [待校准&#64;8684]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Rqt-Console/Using-Rqt-Console.html">使用rqt_控制台 [待校准&#64;7712]</a></li>
<li class="toctree-l2"><a class="reference internal" href="CLI-Intro.html">介绍ROS 2launch [待校准&#64;7101]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Ros2bag/Recording-And-Playing-Back-Data.html">记录和回放数据 [待校准&#64;7639]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Workspace/Creating-A-Workspace.html">创建工作空间 [待校准&#64;8836]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Creating-Your-First-ROS2-Package.html">创建您的第一个ROS 2包 [待校准&#64;6677]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Writing-A-Simple-Cpp-Publisher-And-Subscriber.html">编写简单的发布者和订阅者 (c ++) [待校准&#64;8905]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Writing-A-Simple-Py-Publisher-And-Subscriber.html">编写简单的发布者和订阅者 (Python) [待校准&#64;8992]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Writing-A-Simple-Cpp-Service-And-Client.html">编写简单的服务和客户端 (c ++) [待校准&#64;8953]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Writing-A-Simple-Py-Service-And-Client.html">编写简单的服务和客户端 (Python) [待校准&#64;9028]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Custom-ROS2-Interfaces.html">创建自定义ROS 2 msg 和 srv 文件 [待校准&#64;6739]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Single-Package-Define-And-Use-Interface.html">在ROS 2接口上扩展 [待校准&#64;7844]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Using-Parameters-In-A-Class-CPP.html">在类 (c ++) 中使用参数 [待校准&#64;8769]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Using-Parameters-In-A-Class-Python.html">在类中使用参数 (Python) [待校准&#64;8809]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Getting-Started-With-Ros2doctor.html">开始使用ros2doctor [待校准&#64;7010]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Pluginlib.html">创建和使用插件 (c ++) [待校准&#64;7411]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Actions/Creating-an-Action.html">创建动作 [待校准&#64;6271]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Actions/Writing-a-Cpp-Action-Server-Client.html">编写动作服务器和客户端 (c ++) [待校准&#64;6313]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Actions/Writing-a-Py-Action-Server-Client.html">编写动作服务器和客户端 (Python) [待校准&#64;6385]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Composition.html">在单个进程中组成多个节点 [待校准&#64;6594]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Colcon-Tutorial.html">使用colcon构建包 [待校准&#64;6535]</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="Launch-Main.html">Launch教程 [待校准&#64;7160]</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Creating-Launch-Files.html">创建launch文件 [待校准&#64;7122]</a></li>
<li class="toctree-l3"><a class="reference internal" href="Launch-system.html">[需手动修复的语法]Launch/监控多节点[需手动修复的语法]Launch [待校准&#64;7174]</a></li>
<li class="toctree-l3"><a class="reference internal" href="Using-Substitutions.html">在launch文件中使用替换 [待校准&#64;7297]</a></li>
<li class="toctree-l3"><a class="reference internal" href="Using-Event-Handlers.html">在launch文件中使用事件处理程序 [待校准&#64;7201]</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">在大型项目中使用ROS 2launch [待校准&#64;7234]</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Tf2/Tf2-Main.html">tf2教程 [待校准&#64;8078]</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Tf2/Introduction-To-Tf2.html">tf2简介 [待校准&#64;7994]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tf2/Writing-A-Tf2-Static-Broadcaster-Py.html">编写tf2静态广播器 (Python) [待校准&#64;8299]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tf2/Writing-A-Tf2-Static-Broadcaster-Cpp.html">编写tf2静态广播器 (c ++) [待校准&#64;8257]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tf2/Writing-A-Tf2-Broadcaster-Py.html">编写tf2广播器 (Python) [待校准&#64;8220]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tf2/Writing-A-Tf2-Broadcaster-Cpp.html">编写tf2广播器 (c ++) [待校准&#64;8181]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tf2/Writing-A-Tf2-Listener-Py.html">编写tf2监听程序 (Python) [待校准&#64;8251]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tf2/Writing-A-Tf2-Listener-Cpp.html">编写tf2监听程序 (c ++) [待校准&#64;8233]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tf2/Adding-A-Frame-Py.html">添加帧 (Python) [待校准&#64;7950]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tf2/Adding-A-Frame-Cpp.html">添加帧 (c ++) [待校准&#64;7914]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tf2/Learning-About-Tf2-And-Time-Py.html">学习tf2和时间 (Python) [待校准&#64;8040]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tf2/Learning-About-Tf2-And-Time-Cpp.html">学习tf2和时间 (c ++) [待校准&#64;8023]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tf2/Time-Travel-With-Tf2-Py.html">时间穿梭tf2 (Python) [待校准&#64;8130]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tf2/Time-Travel-With-Tf2-Cpp.html">时间穿梭带tf2 (C++) [待校准&#64;8105]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tf2/Debugging-Tf2-Problems.html">调试tf2问题 [待校准&#64;7956]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tf2/Quaternion-Fundamentals.html">四元数基金amentals [待校准&#64;8054]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tf2/Using-Stamped-Datatypes-With-Tf2-Ros-MessageFilter.html">使用stamped数据类型与tf2_ros: MessageFilter [待校准&#64;8138]</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../URDF/URDF-Main.html">URDF教程 [待校准&#64;8607]</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../URDF/Building-a-Visual-Robot-Model-with-URDF-from-Scratch.html">从头开始用URDF构建视觉机器人模型 [待校准&#64;8556]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../URDF/Building-a-Movable-Robot-Model-with-URDF.html">用URDF建立可移动机器人模型 [待校准&#64;8534]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../URDF/Adding-Physical-and-Collision-Properties-to-a-URDF-Model.html">向URDF模型添加物理和碰撞属性 [待校准&#64;8487]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../URDF/Using-Xacro-to-Clean-Up-a-URDF-File.html">使用Xacro清理URDF文件 [待校准&#64;8635]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../URDF/Using-URDF-with-Robot-State-Publisher.html">将URDF与robot_state_发布者结合使用 [待校准&#64;8609]</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Topics/Topic-Statistics-Tutorial.html">ROS 2话题统计教程 (c ++) [待校准&#64;8311]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Discovery-Server/Discovery-Server.html">使用Fast DDS Discovery Server作为发现协议 [社区贡献] [待校准&#64;6879]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Allocator-Template-Tutorial.html">实现自定义内存分配器 [待校准&#64;6445]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Simulators/Webots/Setting-up-a-Robot-Simulation-Webots.html">设置机器人仿真 (Webots) [待校准&#64;7782]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Deploying-ROS-2-on-IBM-Cloud.html">IBM Cloud Kubernetes上的ROS2 [社区-贡献] [待校准&#64;6792]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Eclipse-Oxygen-with-ROS-2-and-rviz2.html">带有ROS 2和rviz2的Eclipse Oxygen [社区贡献] [待校准&#64;6947]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Building-Realtime-rt_preempt-kernel-for-ROS-2.html">为ROS 2构建实时Linux [社区-贡献] [待校准&#64;6514]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Ros2bag/Recording-A-Bag-From-Your-Own-Node.html">从您自己的节点记录一个包 [待校准&#64;7554]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Building-ROS2-Package-with-eclipse-2021-06.html">使用eclipse 2021-06构建ROS 2包 [待校准&#64;6486]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Quality-of-Service.html">使用服务质量设置处理有损网络 [待校准&#64;7462]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Managed-Nodes.html">具有托管生命周期的节点管理 [待校准&#64;7369]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Intra-Process-Communication.html">高效的流程内通讯 [待校准&#64;7051]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Rosbag-with-ROS1-Bridge.html">使用ROS 1bridge用rosbag记录和回放话题数据 [待校准&#64;7685]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Real-Time-Programming.html">ROS 2中的实时编程 [待校准&#64;7491]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dummy-robot-demo.html">尝试dummy robot例程 [待校准&#64;9056]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Logging-and-logger-configuration.html">日志和日志记录器配置例程 [待校准&#64;7322]</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../How-To-Guides.html">操作指南 [待校准&#64;204]</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Installation-Troubleshooting.html">安装故障诊断工具 [待校准&#64;535]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Developing-a-ROS-2-Package.html">开发ROS 2包 [待校准&#64;514]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Ament-CMake-Documentation.html">[需手动修复的语法]ament _ cmake用户文档 [待校准&#64;208]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Ament-CMake-Python-Documentation.html">[需手动修复的语法]ament _ cmake_python用户文档 [待校准&#64;360]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Launch-files-migration-guide.html">迁移launch文件ROS 1ROS 2 [待校准&#64;638]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Launch-file-different-formats.html">对ROS 2Launch文件使用Python、XML和YAML [待校准&#64;611]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Launching-composable-nodes.html">使用ROS 2launch到launch可组合节点 [待校准&#64;733]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Parameters-YAML-files-migration-guide.html">将YAML参数文件从ROS 1迁移到ROS 2 [待校准&#64;850]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Node-arguments.html">通过命令行将ROS参数传递给节点 [待校准&#64;746]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Sync-Vs-Async.html">同步与异步服务客户端 [待校准&#64;972]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/DDS-tuning.html">DDS调谐信息 [待校准&#64;470]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Overriding-QoS-Policies-For-Recording-And-Playback.html">rosbag2: 重载QoS策略 [待校准&#64;772]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Working-with-multiple-RMW-implementations.html">使用多个ROS 2中间件实现 [待校准&#64;1068]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Cross-compilation.html">交叉编译 [待校准&#64;383]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Releasing-a-ROS-2-package-with-bloom.html">发布带有bloom的ROS 2包 [待校准&#64;937]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-Python-Packages.html">将Python包与ROS 2结合使用 [待校准&#64;1011]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/RQt-Port-Plugin-Windows.html">将RQt插件移植到Windows [待校准&#64;862]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Run-2-nodes-in-single-or-separate-docker-containers.html">在Docker中运行ROS 2节点 [社区-贡献] [待校准&#64;959]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Package-maintainer-guide.html">ROS 2包维护者指南 [待校准&#64;785]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Building-a-Custom-Debian-Package.html">构建自定义Debian包 [待校准&#64;371]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Topics-Services-Actions.html">话题vs服务vsAction [待校准&#64;997]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-Variants.html">使用变体 [待校准&#64;1031]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-ros2-param.html">使用 <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">param</span></code> 命令行工具 [待校准&#64;1046]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/RQt-Source-Install.html">从源文件构建RQt [待校准&#64;883]</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/RQt-Source-Install-MacOS.html">在macOS上从源文件构建RQt [待校准&#64;908]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/RQt-Source-Install-Windows10.html">在Windows 10上从源文件构建RQt [待校准&#64;916]</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Concepts.html">概念 [待校准&#64;4938]</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Domain-ID.html">ROS_DOMAIN_ID [待校准&#64;5194]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Different-Middleware-Vendors.html">关于不同的ROS 2 DDS/RTPS供应商 [待校准&#64;5153]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Logging.html">关于日志和日志记录器配置 [待校准&#64;5325]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Quality-of-Service-Settings.html">关于服务质量设置 [待校准&#64;5369]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-ROS-2-Client-Libraries.html">关于ROS 2客户端库 [待校准&#64;5459]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-ROS-Interfaces.html">关于ROS 2接口 [待校准&#64;5526]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-ROS-2-Parameters.html">关于ROS 2中的参数 [待校准&#64;5490]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Executors.html">执行器 [待校准&#64;5227]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Topic-Statistics.html">关于话题统计 [待校准&#64;5671]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Command-Line-Tools.html">使用命令行工具进行自检 [待校准&#64;5091]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-RQt.html">RQt的概述和使用 [待校准&#64;5625]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Composition.html">关于组件 [待校准&#64;5119]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Catment.html">[需手动修复的语法]ament和catkin的混合研究 [待校准&#64;5019]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Cross-Compilation.html">关于交叉编译 [待校准&#64;5141]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Tf2.html">关于tf2 [待校准&#64;5653]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Build-System.html">关于构建系统 [待校准&#64;4969]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Internal-Interfaces.html">关于内部ROS 2接口 [待校准&#64;5265]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Middleware-Implementations.html">关于ROS 2中间件实现 [待校准&#64;5347]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Client-Interfaces.html">ROS 2客户端接口 (客户端库) [待校准&#64;5079]</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Contributing.html">贡献 [待校准&#64;9128]</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Contributing/Developer-Guide.html">ROS 2开发人员指南 [待校准&#64;9430]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Contributing/Code-Style-Language-Versions.html">代码样式和语言版本 [待校准&#64;9212]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Contributing/Quality-Guide.html">质量指南: 确保代码质量 [待校准&#64;10012]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Contributing/Migration-Guide.html">从ROS 1迁移指南 [待校准&#64;9780]</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Contributing/Migration-Guide-Python.html">来自ROS 1的Python迁移指南 [待校准&#64;10003]</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Contributing/Build-Farms.html">ROS Build Farms [待校准&#64;9167]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Contributing/Windows-Tips-and-Tricks.html">Windows提示和技巧 [待校准&#64;10105]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Contributing/Contributing-To-ROS-2-Documentation.html">为ROS 2文档做出贡献 [待校准&#64;9366]</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Contact.html">联系人 [待校准&#64;6167]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ROSCon-Content.html">ROSCon内容 [待校准&#64;105]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Releases.html">发行版 [待校准&#64;1233]</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Alpha-Overview.html">ROS 2 α 发行版本 (2015年8月-2016年10月) [待校准&#64;1306]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Beta1-Overview.html">贝塔1 (代号'Asphalt'; 2016年12月) [待校准&#64;1386]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Beta2-Overview.html">贝塔2 (代号'r2b2'; 2017年7月) [待校准&#64;1420]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Beta3-Overview.html">贝塔3 (代号'r2b3'; 2017年9月) [待校准&#64;1451]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Ardent-Apalone.html">ROS 2Ardent阿帕隆 (代号'ardent'; 2017年12月) [待校准&#64;4089]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Bouncy-Bolson.html">ROS 2 Bouncy Bolson (代号'bouncy'; 2018年6月) [待校准&#64;4130]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Crystal-Clemmys.html">ROS 2Crystal Clemmys (代号'crystal'; 2018年12月) [待校准&#64;4158]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Dashing-Diademata.html">ROS 2DashingDiademata (代号'dashing'; 2019年5月31日) [待校准&#64;4237]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Eloquent-Elusor.html">ROS 2EloquentElusor (代号'eloquent'; 2019年11月22日) [待校准&#64;4427]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Foxy-Fitzroy.html">ROS 2FoxyFitzroy (代号'foxy'; 2020年6月5日) [待校准&#64;4503]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Galactic-Geochelone.html">ROS 2GalacticGeochelone (代号'galactic'; 2021年5月) [待校准&#64;4649]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Galactic-Geochelone-Complete-Changelog.html">ROS 2GalacticGeochelone完整变更日志 [待校准&#64;1470]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Humble-Hawksbill.html">ROS 2Humble Hawksbill (代号'humble'; 2022年5月) [待校准&#64;4845]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Rolling-Ridley.html">ROS 2Rolling Ridley (代号'rolling'; 2020年6月) [待校准&#64;4929]</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Features.html">功能状态 [待校准&#64;9074]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Roadmap.html">路线图 [待校准&#64;45]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Feature-Ideas.html">特色创意 [待校准&#64;1123]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Governance.html">项目管理 [待校准&#64;10131]</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Governance/ROS2-TSC-Charter.html">ROS 2技术指导委员会章程 [待校准&#64;10280]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Governance/ROS2-TSC-Intake-process.html">ROS 2 TSC申请人摄入流程 [待校准&#64;10368]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Governance/How-To-Start-A-Community-Working-Group.html">如何成立社区工作组 [待校准&#64;10253]</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Marketing.html">营销材料 [待校准&#64;6193]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Related-Projects.html">相关项目 [待校准&#64;6209]</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Related-Projects/Intel-ROS2-Projects.html">[需手动修复的语法]IntelROS 2项目 [待校准&#64;6210]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Related-Projects/Nvidia-ROS2-Projects.html">[需手动修复的语法]NVIDIAROS 2项目 [待校准&#64;6228]</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Glossary.html">术语表 [待校准&#64;1217]</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ROS 2 documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../Tutorials.html">教程 [待校准&#64;6242]</a> &raquo;</li>
          <li><a href="Launch-Main.html">Launch教程 [待校准&#64;7160]</a> &raquo;</li>
      <li>在大型项目中使用ROS 2launch [待校准&#64;7234]</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ros2/ros2_documentation/blob/foxy/source/Tutorials/Launch/Using-ROS2-Launch-For-Large-Projects.rst" class="fa fa-github"> 在 GitHub 上修改</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             


  <div class="section" id="using-ros-2-launch-for-large-projects">
<span id="usingros2launchforlargeprojects"></span><h1>在大型项目中使用ROS 2launch <a class="reference external" href="http://localhost:3000/#/home?msgid=7234">[待校准&#64;7234]</a><a class="headerlink" href="#using-ros-2-launch-for-large-projects" title="永久链接至标题"></a></h1>
<p>Goal目标: Learn学习使用ROS 2launch文件管理大型项目的最佳实践 <a class="reference external" href="http://localhost:3000/#/home?msgid=7235">[待校准&#64;7235]</a></p>
<p>Tutorial教程级别: Intermediate中级 <a class="reference external" href="http://localhost:3000/#/home?msgid=6273">[待校准&#64;6273]</a></p>
<p>Time时间: 20 20分钟 <a class="reference external" href="http://localhost:3000/#/home?msgid=6741">[待校准&#64;6741]</a></p>
<div class="contents local topic" id="contents">
<p class="topic-title">内容 <a class="reference external" href="http://localhost:3000/#/home?msgid=6275">[待校准&#64;6275]</a></p>
<ul class="simple">
<li><p><a class="reference internal" href="#background" id="id1">背景 [待校准&#64;6276]</a></p></li>
<li><p><a class="reference internal" href="#prerequisites" id="id2">先决条件 [待校准&#64;6278]</a></p></li>
<li><p><a class="reference internal" href="#introduction" id="id3">简介 [待校准&#64;7237]</a></p></li>
<li><p><a class="reference internal" href="#writing-launch-files" id="id4">编写launch文件 [待校准&#64;7239]</a></p>
<ul>
<li><p><a class="reference internal" href="#top-level-organization" id="id5">1顶级组织 [待校准&#64;7240]</a></p></li>
<li><p><a class="reference internal" href="#parameters" id="id6">2参数 [待校准&#64;7247]</a></p>
<ul>
<li><p><a class="reference internal" href="#setting-parameters-in-the-launch-file" id="id7">2.1launch文件中的设置参数 [待校准&#64;7248]</a></p></li>
<li><p><a class="reference internal" href="#loading-parameters-from-yaml-file" id="id8">2.2从YAML文件加载参数 [待校准&#64;7251]</a></p></li>
<li><p><a class="reference internal" href="#using-wildcards-in-yaml-files" id="id9">2.3在YAML文件中使用通配符 [待校准&#64;7257]</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#namespaces" id="id10">3命名空间 [待校准&#64;7264]</a></p></li>
<li><p><a class="reference internal" href="#reusing-nodes" id="id11">4重用节点 [待校准&#64;7269]</a></p></li>
<li><p><a class="reference internal" href="#parameter-overrides" id="id12">5参数覆盖 [待校准&#64;7274]</a></p></li>
<li><p><a class="reference internal" href="#remapping" id="id13">6重新映射 [待校准&#64;7277]</a></p></li>
<li><p><a class="reference internal" href="#config-files" id="id14">7配置文件 [待校准&#64;7280]</a></p></li>
<li><p><a class="reference internal" href="#environment-variables" id="id15">8环境变量 [待校准&#64;7283]</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#running-launch-files" id="id16">运行launch文件 [待校准&#64;7286]</a></p>
<ul>
<li><p><a class="reference internal" href="#update-setup-py" id="id17">1更新设置 [待校准&#64;7287]</a></p></li>
<li><p><a class="reference internal" href="#build-and-run" id="id18">2构建和运行 [待校准&#64;7289]</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#summary" id="id19">总结 [待校准&#64;6307]</a></p></li>
</ul>
</div>
<div class="section" id="background">
<h2>背景 <a class="reference external" href="http://localhost:3000/#/home?msgid=6276">[待校准&#64;6276]</a><a class="headerlink" href="#background" title="永久链接至标题"></a></h2>
<p>本教程介绍了为大型项目编写launch文件的一些技巧。重点是如何构建launch文件，以便在不同情况下尽可能多地重复使用。此外，它还涵盖了不同ROS 2launch工具的使用示例，如参数、YAML文件、重映射、命名空间、默认参数和RViz配置。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7172">[待校准&#64;7172]</a></p>
</div>
<div class="section" id="prerequisites">
<h2>先决条件 <a class="reference external" href="http://localhost:3000/#/home?msgid=6278">[待校准&#64;6278]</a><a class="headerlink" href="#prerequisites" title="永久链接至标题"></a></h2>
<p>本教程使用 <a class="reference internal" href="../Turtlesim/Introducing-Turtlesim.html"><span class="doc">turtlesim</span></a> and <a class="reference internal" href="../Tf2/Introduction-To-Tf2.html"><span class="doc">turtle_tf2_py</span></a> packages. This tutorial also assumes you have <a class="reference internal" href="../Creating-Your-First-ROS2-Package.html"><span class="doc">created a new package</span></a> 构建类型 <code class="docutils literal notranslate"><span class="pre">ament_python</span></code> 调用ed <code class="docutils literal notranslate"><span class="pre">launch_tutorial</span></code> 。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7236">[待校准&#64;7236]</a></p>
</div>
<div class="section" id="introduction">
<h2>简介 <a class="reference external" href="http://localhost:3000/#/home?msgid=7237">[待校准&#64;7237]</a><a class="headerlink" href="#introduction" title="永久链接至标题"></a></h2>
<p>典型调用y机器人上的大型应用程序涉及几个互连节点，每个节点可以有许多参数。海龟模拟器中多只海龟的仿真可以作为一个很好的例子。turtle仿真由多个turtle节点、world配置以及TF广播器和监听节点组成。在所有节点之间，有大量的ROS参数会影响这些节点的行为和外观。ROS 2launch文件允许我们启动所有节点并在一个地方设置相应的参数。在教程结束时，您将在 <code class="docutils literal notranslate"><span class="pre">launch_tutorial</span></code> 包中构建 <code class="docutils literal notranslate"><span class="pre">launch_turtlesim.launch.py</span></code> launch文件。这launch文件将带来不同节点负责仿真两turtlesim仿真，启动TF广播器s和听众，加载参数，launch成为RViz配置。在本教程中，我们将介绍这个launch文件和所有使用的相关功能。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7238">[待校准&#64;7238]</a></p>
</div>
<div class="section" id="writing-launch-files">
<h2>编写launch文件 <a class="reference external" href="http://localhost:3000/#/home?msgid=7239">[待校准&#64;7239]</a><a class="headerlink" href="#writing-launch-files" title="永久链接至标题"></a></h2>
<div class="section" id="top-level-organization">
<h3>1顶级组织 <a class="reference external" href="http://localhost:3000/#/home?msgid=7240">[待校准&#64;7240]</a><a class="headerlink" href="#top-level-organization" title="永久链接至标题"></a></h3>
<p>编写launch文件的目的之一应该是使它们尽可能可重用。这可以通过将相关节点和配置聚类到单独的launch文件中来实现。之后，可以编写专用于特定配置的顶级launch文件。这将允许在完全相同的机器人之间移动，而不需要改变launch文件。即使是改变，比如从真正的机器人移动到模拟机器人，也只需做一些改变。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7241">[待校准&#64;7241]</a></p>
<p>我们现在将讨论使这成为可能的顶级launch文件结构。首先，我们将创建一个launch文件，该文件将调用单独的launch文件。为此，让我们在 <code class="docutils literal notranslate"><span class="pre">launch_tutorial</span></code> 包的 <code class="docutils literal notranslate"><span class="pre">/launch</span></code> 文件夹中创建一个 <code class="docutils literal notranslate"><span class="pre">launch_turtlesim.launch.py</span></code> 文件。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7242">[待校准&#64;7242]</a></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">ament_index_python.packages</span> <span class="kn">import</span> <span class="n">get_package_share_directory</span>

<span class="kn">from</span> <span class="nn">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="nn">launch.actions</span> <span class="kn">import</span> <span class="n">IncludeLaunchDescription</span>
<span class="kn">from</span> <span class="nn">launch.launch_description_sources</span> <span class="kn">import</span> <span class="n">PythonLaunchDescriptionSource</span>


<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
   <span class="n">turtlesim_world_1</span> <span class="o">=</span> <span class="n">IncludeLaunchDescription</span><span class="p">(</span>
      <span class="n">PythonLaunchDescriptionSource</span><span class="p">([</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
         <span class="n">get_package_share_directory</span><span class="p">(</span><span class="s1">&#39;launch_tutorial&#39;</span><span class="p">),</span> <span class="s1">&#39;launch&#39;</span><span class="p">),</span>
         <span class="s1">&#39;/turtlesim_world_1.launch.py&#39;</span><span class="p">])</span>
      <span class="p">)</span>
   <span class="n">turtlesim_world_2</span> <span class="o">=</span> <span class="n">IncludeLaunchDescription</span><span class="p">(</span>
      <span class="n">PythonLaunchDescriptionSource</span><span class="p">([</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
         <span class="n">get_package_share_directory</span><span class="p">(</span><span class="s1">&#39;launch_tutorial&#39;</span><span class="p">),</span> <span class="s1">&#39;launch&#39;</span><span class="p">),</span>
         <span class="s1">&#39;/turtlesim_world_2.launch.py&#39;</span><span class="p">])</span>
      <span class="p">)</span>
   <span class="n">broadcaster_listener_nodes</span> <span class="o">=</span> <span class="n">IncludeLaunchDescription</span><span class="p">(</span>
      <span class="n">PythonLaunchDescriptionSource</span><span class="p">([</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
         <span class="n">get_package_share_directory</span><span class="p">(</span><span class="s1">&#39;launch_tutorial&#39;</span><span class="p">),</span> <span class="s1">&#39;launch&#39;</span><span class="p">),</span>
         <span class="s1">&#39;/broadcaster_listener.launch.py&#39;</span><span class="p">]),</span>
      <span class="n">launch_arguments</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;target_frame&#39;</span><span class="p">:</span> <span class="s1">&#39;carrot1&#39;</span><span class="p">}</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>
      <span class="p">)</span>
   <span class="n">mimic_node</span> <span class="o">=</span> <span class="n">IncludeLaunchDescription</span><span class="p">(</span>
      <span class="n">PythonLaunchDescriptionSource</span><span class="p">([</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
         <span class="n">get_package_share_directory</span><span class="p">(</span><span class="s1">&#39;launch_tutorial&#39;</span><span class="p">),</span> <span class="s1">&#39;launch&#39;</span><span class="p">),</span>
         <span class="s1">&#39;/mimic.launch.py&#39;</span><span class="p">])</span>
      <span class="p">)</span>
   <span class="n">fixed_frame_node</span> <span class="o">=</span> <span class="n">IncludeLaunchDescription</span><span class="p">(</span>
      <span class="n">PythonLaunchDescriptionSource</span><span class="p">([</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
         <span class="n">get_package_share_directory</span><span class="p">(</span><span class="s1">&#39;launch_tutorial&#39;</span><span class="p">),</span> <span class="s1">&#39;launch&#39;</span><span class="p">),</span>
         <span class="s1">&#39;/fixed_broadcaster.launch.py&#39;</span><span class="p">])</span>
      <span class="p">)</span>
   <span class="n">rviz_node</span> <span class="o">=</span> <span class="n">IncludeLaunchDescription</span><span class="p">(</span>
      <span class="n">PythonLaunchDescriptionSource</span><span class="p">([</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
         <span class="n">get_package_share_directory</span><span class="p">(</span><span class="s1">&#39;launch_tutorial&#39;</span><span class="p">),</span> <span class="s1">&#39;launch&#39;</span><span class="p">),</span>
         <span class="s1">&#39;/turtlesim_rviz.launch.py&#39;</span><span class="p">])</span>
      <span class="p">)</span>

   <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
      <span class="n">turtlesim_world_1</span><span class="p">,</span>
      <span class="n">turtlesim_world_2</span><span class="p">,</span>
      <span class="n">broadcaster_listener_nodes</span><span class="p">,</span>
      <span class="n">mimic_node</span><span class="p">,</span>
      <span class="n">fixed_frame_node</span><span class="p">,</span>
      <span class="n">rviz_node</span>
   <span class="p">])</span>
</pre></div>
</div>
<p>这个launch文件包括一组其他launch文件。每个包含的launch文件都包含节点、参数和可能的嵌套包含，它们属于系统的一部分。准确，我们launch两个turtlesim仿真世界，TF广播器，TF监听器，模仿，固定帧广播器，RViz节点。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7243">[待校准&#64;7243]</a></p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>设计提示: 顶级launch文件应简短，包括与应用程序子组件相对应的其他文件，以及通常更改的参数。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7244">[待校准&#64;7244]</a></p>
</div>
<p>按照以下方式编写launch文件可以很容易地换出系统的一部分，我们将在后面看到。然而，有些情况下，由于性能和使用的原因，一些节点或launch文件必须分别被launch。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7245">[待校准&#64;7245]</a></p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>设计提示: 在决定你的应用程序需要多少顶级launch文件时，要注意权衡。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7246">[待校准&#64;7246]</a></p>
</div>
</div>
<div class="section" id="parameters">
<h3>2参数 <a class="reference external" href="http://localhost:3000/#/home?msgid=7247">[待校准&#64;7247]</a><a class="headerlink" href="#parameters" title="永久链接至标题"></a></h3>
<div class="section" id="setting-parameters-in-the-launch-file">
<h4>2.1launch文件中的设置参数 <a class="reference external" href="http://localhost:3000/#/home?msgid=7248">[待校准&#64;7248]</a><a class="headerlink" href="#setting-parameters-in-the-launch-file" title="永久链接至标题"></a></h4>
<p>我们将从编写一个launch文件开始，该文件将开始我们的第一个turtlesim仿真。首先，创建一个调用ed <code class="docutils literal notranslate"><span class="pre">turtlesim_world_1.launch.py</span></code> 的新文件。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7249">[待校准&#64;7249]</a></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="nn">launch.actions</span> <span class="kn">import</span> <span class="n">DeclareLaunchArgument</span>
<span class="kn">from</span> <span class="nn">launch.substitutions</span> <span class="kn">import</span> <span class="n">LaunchConfiguration</span><span class="p">,</span> <span class="n">TextSubstitution</span>

<span class="kn">from</span> <span class="nn">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>


<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
   <span class="n">background_r_launch_arg</span> <span class="o">=</span> <span class="n">DeclareLaunchArgument</span><span class="p">(</span>
      <span class="s1">&#39;background_r&#39;</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="n">TextSubstitution</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
   <span class="p">)</span>
   <span class="n">background_g_launch_arg</span> <span class="o">=</span> <span class="n">DeclareLaunchArgument</span><span class="p">(</span>
      <span class="s1">&#39;background_g&#39;</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="n">TextSubstitution</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;84&#39;</span><span class="p">)</span>
   <span class="p">)</span>
   <span class="n">background_b_launch_arg</span> <span class="o">=</span> <span class="n">DeclareLaunchArgument</span><span class="p">(</span>
      <span class="s1">&#39;background_b&#39;</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="n">TextSubstitution</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;122&#39;</span><span class="p">)</span>
   <span class="p">)</span>

   <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
      <span class="n">background_r_launch_arg</span><span class="p">,</span>
      <span class="n">background_g_launch_arg</span><span class="p">,</span>
      <span class="n">background_b_launch_arg</span><span class="p">,</span>
      <span class="n">Node</span><span class="p">(</span>
         <span class="n">package</span><span class="o">=</span><span class="s1">&#39;turtlesim&#39;</span><span class="p">,</span>
         <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;turtlesim_node&#39;</span><span class="p">,</span>
         <span class="n">name</span><span class="o">=</span><span class="s1">&#39;sim&#39;</span><span class="p">,</span>
         <span class="n">parameters</span><span class="o">=</span><span class="p">[{</span>
            <span class="s1">&#39;background_r&#39;</span><span class="p">:</span> <span class="n">LaunchConfiguration</span><span class="p">(</span><span class="s1">&#39;background_r&#39;</span><span class="p">),</span>
            <span class="s1">&#39;background_g&#39;</span><span class="p">:</span> <span class="n">LaunchConfiguration</span><span class="p">(</span><span class="s1">&#39;background_g&#39;</span><span class="p">),</span>
            <span class="s1">&#39;background_b&#39;</span><span class="p">:</span> <span class="n">LaunchConfiguration</span><span class="p">(</span><span class="s1">&#39;background_b&#39;</span><span class="p">),</span>
         <span class="p">}]</span>
      <span class="p">),</span>
   <span class="p">])</span>
</pre></div>
</div>
<p>这个launch文件启动 <code class="docutils literal notranslate"><span class="pre">turtlesim_node</span></code> 节点，它启动turtlesim仿真，仿真配置参数被定义并传递给节点。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7250">[待校准&#64;7250]</a></p>
</div>
<div class="section" id="loading-parameters-from-yaml-file">
<h4>2.2从YAML文件加载参数 <a class="reference external" href="http://localhost:3000/#/home?msgid=7251">[待校准&#64;7251]</a><a class="headerlink" href="#loading-parameters-from-yaml-file" title="永久链接至标题"></a></h4>
<p>在第二个launch中，我们将使用不同的配置开始第二个turtlesim仿真。现在创建一个 <code class="docutils literal notranslate"><span class="pre">turtlesim_world_2.launch.py</span></code> 文件。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7252">[待校准&#64;7252]</a></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">ament_index_python.packages</span> <span class="kn">import</span> <span class="n">get_package_share_directory</span>

<span class="kn">from</span> <span class="nn">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="nn">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>


<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
   <span class="n">config</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
      <span class="n">get_package_share_directory</span><span class="p">(</span><span class="s1">&#39;launch_tutorial&#39;</span><span class="p">),</span>
      <span class="s1">&#39;config&#39;</span><span class="p">,</span>
      <span class="s1">&#39;turtlesim.yaml&#39;</span>
      <span class="p">)</span>

   <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
      <span class="n">Node</span><span class="p">(</span>
         <span class="n">package</span><span class="o">=</span><span class="s1">&#39;turtlesim&#39;</span><span class="p">,</span>
         <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;turtlesim_node&#39;</span><span class="p">,</span>
         <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;turtlesim2&#39;</span><span class="p">,</span>
         <span class="n">name</span><span class="o">=</span><span class="s1">&#39;sim&#39;</span><span class="p">,</span>
         <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="n">config</span><span class="p">]</span>
      <span class="p">)</span>
   <span class="p">])</span>
</pre></div>
</div>
<p>这launch文件将launch相同 <code class="docutils literal notranslate"><span class="pre">turtlesim_node</span></code> 参数值直接加载从YAML配置文件。在YAML文件中定义参数和参数使存储和加载大量变量变得容易。此外，YAML文件可以很容易地从当前的 <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">param</span></code> 列表中导出。要了解如何做到这一点，请参考 <a class="reference internal" href="../Parameters/Understanding-ROS2-Parameters.html"><span class="doc">Understanding ROS 2 parameters</span></a> 教程。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7253">[待校准&#64;7253]</a></p>
<p>现在让我们在我们包的 <code class="docutils literal notranslate"><span class="pre">/config</span></code> 文件夹中创建一个配置文件， <code class="docutils literal notranslate"><span class="pre">turtlesim.yaml</span></code> ，它将由我们的launch文件加载。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7254">[待校准&#64;7254]</a></p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">/turtlesim2/sim</span><span class="p">:</span>
   <span class="nt">ros__parameters</span><span class="p">:</span>
      <span class="nt">background_b</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">255</span>
      <span class="nt">background_g</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">86</span>
      <span class="nt">background_r</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">150</span>
</pre></div>
</div>
<p>如果我们现在启动 <code class="docutils literal notranslate"><span class="pre">turtlesim_world_2.launch.py</span></code> launch文件，我们将使用预先配置的背景色启动 <code class="docutils literal notranslate"><span class="pre">turtlesim_node</span></code> 。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7255">[待校准&#64;7255]</a></p>
<p>要了解有关使用参数和使用YAML文件的更多信息，请查看 <a class="reference internal" href="../Parameters/Understanding-ROS2-Parameters.html"><span class="doc">Understanding ROS 2 parameters</span></a> 教程。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7256">[待校准&#64;7256]</a></p>
</div>
<div class="section" id="using-wildcards-in-yaml-files">
<h4>2.3在YAML文件中使用通配符 <a class="reference external" href="http://localhost:3000/#/home?msgid=7257">[待校准&#64;7257]</a><a class="headerlink" href="#using-wildcards-in-yaml-files" title="永久链接至标题"></a></h4>
<p>在某些情况下，我们希望在多个节点中设置相同的参数。这些节点可以具有不同的命名空间或名称，但仍具有相同的参数。定义明确定义命名空间和节点名称的单独YAML文件效率不高。一种解决方案是使用通配符作为文本值中未知字符的替换，将参数应用于几个不同的节点。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7258">[待校准&#64;7258]</a></p>
<p>现在让我们创建一个新 <code class="docutils literal notranslate"><span class="pre">turtlesim_world_3.launch.py</span></code> 文件类似 <code class="docutils literal notranslate"><span class="pre">turtlesim_world_2.launch.py</span></code> 包括一个 <code class="docutils literal notranslate"><span class="pre">turtlesim_node</span></code> 节点。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7259">[待校准&#64;7259]</a></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">Node</span><span class="p">(</span>
   <span class="n">package</span><span class="o">=</span><span class="s1">&#39;turtlesim&#39;</span><span class="p">,</span>
   <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;turtlesim_node&#39;</span><span class="p">,</span>
   <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;turtlesim3&#39;</span><span class="p">,</span>
   <span class="n">name</span><span class="o">=</span><span class="s1">&#39;sim&#39;</span><span class="p">,</span>
   <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="n">config</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>但是，加载相同的YAML文件不会影响第三个turtlesim世界的外观。原因是其参数存储在另一个命名空间下，如下所示: <a class="reference external" href="http://localhost:3000/#/home?msgid=7260">[待校准&#64;7260]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">/turtlesim3/sim:</span>
<span class="go">   background_b</span>
<span class="go">   background_g</span>
<span class="go">   background_r</span>
</pre></div>
</div>
<p>因此，我们可以使用通配符语法，而不是为使用相同参数的同一节点创建新配置。尽管节点名称和命名空间不同，但 <code class="docutils literal notranslate"><span class="pre">/**</span></code> 将分配每个节点中的所有参数。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7261">[待校准&#64;7261]</a></p>
<p>我们现在将更新 <code class="docutils literal notranslate"><span class="pre">turtlesim.yaml</span></code> ， <code class="docutils literal notranslate"><span class="pre">/config</span></code> 文件夹在以下方式: <a class="reference external" href="http://localhost:3000/#/home?msgid=7262">[待校准&#64;7262]</a></p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">/**</span><span class="p">:</span>
   <span class="nt">ros__parameters</span><span class="p">:</span>
      <span class="nt">background_b</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">255</span>
      <span class="nt">background_g</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">86</span>
      <span class="nt">background_r</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">150</span>
</pre></div>
</div>
<p>现在包括 <code class="docutils literal notranslate"><span class="pre">turtlesim_world_3.launch.py</span></code> launch描述我们主要launch文件。使用配置文件在我们launch描述将分配 <code class="docutils literal notranslate"><span class="pre">background_b</span></code> ， <code class="docutils literal notranslate"><span class="pre">background_g</span></code> ， <code class="docutils literal notranslate"><span class="pre">background_r</span></code> 参数指定值 <code class="docutils literal notranslate"><span class="pre">turtlesim3/sim</span></code> 和 <code class="docutils literal notranslate"><span class="pre">turtlesim2/sim</span></code> 节点。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7263">[待校准&#64;7263]</a></p>
</div>
</div>
<div class="section" id="namespaces">
<h3>3命名空间 <a class="reference external" href="http://localhost:3000/#/home?msgid=7264">[待校准&#64;7264]</a><a class="headerlink" href="#namespaces" title="永久链接至标题"></a></h3>
<p>您可能已经注意到，我们已经在 <code class="docutils literal notranslate"><span class="pre">turtlesim_world_2.launch.py</span></code> 文件中定义了turlesim世界的命名空间。唯一命名空间允许系统启动两个相似的节点，而没有节点名称或话题名称冲突。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7265">[待校准&#64;7265]</a></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;turtlesim2&#39;</span><span class="p">,</span>
</pre></div>
</div>
<p>但是，如果launch文件包含大量节点，则为每个节点定义命名空间可能会变得乏味。为了解决这个问题，可以使用 <code class="docutils literal notranslate"><span class="pre">PushRosNamespace</span></code> 动作为每个launch文件描述定义全局命名空间。每个嵌套节点将继承该命名空间自动调用y。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7266">[待校准&#64;7266]</a></p>
<p>为此，首先，我们需要从 <code class="docutils literal notranslate"><span class="pre">turtlesim_world_2.launch.py</span></code> 文件中删除 “命名空间 = 'turtlesim2'” 行。之后，我们需要更新 <code class="docutils literal notranslate"><span class="pre">launch_turtlesim.launch.py</span></code> 以包括以下几行: <a class="reference external" href="http://localhost:3000/#/home?msgid=7267">[待校准&#64;7267]</a></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">launch.actions</span> <span class="kn">import</span> <span class="n">GroupAction</span>
<span class="kn">from</span> <span class="nn">launch_ros.actions</span> <span class="kn">import</span> <span class="n">PushRosNamespace</span>

   <span class="o">...</span>
   <span class="n">turtlesim_world_2</span> <span class="o">=</span> <span class="n">IncludeLaunchDescription</span><span class="p">(</span>
      <span class="n">PythonLaunchDescriptionSource</span><span class="p">([</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
         <span class="n">get_package_share_directory</span><span class="p">(</span><span class="s1">&#39;launch_tutorial&#39;</span><span class="p">),</span> <span class="s1">&#39;launch&#39;</span><span class="p">),</span>
         <span class="s1">&#39;/turtlesim_world_2.launch.py&#39;</span><span class="p">])</span>
      <span class="p">)</span>
   <span class="n">turtlesim_world_2_with_namespace</span> <span class="o">=</span> <span class="n">GroupAction</span><span class="p">(</span>
     <span class="n">actions</span><span class="o">=</span><span class="p">[</span>
         <span class="n">PushRosNamespace</span><span class="p">(</span><span class="s1">&#39;turtlesim2&#39;</span><span class="p">),</span>
         <span class="n">turtlesim_world_2</span><span class="p">,</span>
      <span class="p">]</span>
   <span class="p">)</span>
</pre></div>
</div>
<p>最后，我们在 <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">LaunchDescription</span></code> 的声明中将 <code class="docutils literal notranslate"><span class="pre">turtlesim_world_2</span></code> 改为 <code class="docutils literal notranslate"><span class="pre">turtlesim_world_2_with_namespace</span></code> 。因此， <code class="docutils literal notranslate"><span class="pre">turtlesim_world_2.launch.py</span></code> launch描述中的每个节点都将有一个 <code class="docutils literal notranslate"><span class="pre">turtlesim2</span></code> 命名空间。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7268">[待校准&#64;7268]</a></p>
</div>
<div class="section" id="reusing-nodes">
<h3>4重用节点 <a class="reference external" href="http://localhost:3000/#/home?msgid=7269">[待校准&#64;7269]</a><a class="headerlink" href="#reusing-nodes" title="永久链接至标题"></a></h3>
<p>现在创建一个 <code class="docutils literal notranslate"><span class="pre">broadcaster_listener.launch.py</span></code> 文件。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7270">[待校准&#64;7270]</a></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="nn">launch.actions</span> <span class="kn">import</span> <span class="n">DeclareLaunchArgument</span>
<span class="kn">from</span> <span class="nn">launch.substitutions</span> <span class="kn">import</span> <span class="n">LaunchConfiguration</span>

<span class="kn">from</span> <span class="nn">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>


<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
   <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
      <span class="n">DeclareLaunchArgument</span><span class="p">(</span>
         <span class="s1">&#39;target_frame&#39;</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="s1">&#39;turtle1&#39;</span><span class="p">,</span>
         <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Target frame name.&#39;</span>
      <span class="p">),</span>
      <span class="n">Node</span><span class="p">(</span>
         <span class="n">package</span><span class="o">=</span><span class="s1">&#39;turtle_tf2_py&#39;</span><span class="p">,</span>
         <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;turtle_tf2_broadcaster&#39;</span><span class="p">,</span>
         <span class="n">name</span><span class="o">=</span><span class="s1">&#39;broadcaster1&#39;</span><span class="p">,</span>
         <span class="n">parameters</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;turtlename&#39;</span><span class="p">:</span> <span class="s1">&#39;turtle1&#39;</span><span class="p">}</span>
         <span class="p">]</span>
      <span class="p">),</span>
      <span class="n">Node</span><span class="p">(</span>
         <span class="n">package</span><span class="o">=</span><span class="s1">&#39;turtle_tf2_py&#39;</span><span class="p">,</span>
         <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;turtle_tf2_broadcaster&#39;</span><span class="p">,</span>
         <span class="n">name</span><span class="o">=</span><span class="s1">&#39;broadcaster2&#39;</span><span class="p">,</span>
         <span class="n">parameters</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;turtlename&#39;</span><span class="p">:</span> <span class="s1">&#39;turtle2&#39;</span><span class="p">}</span>
         <span class="p">]</span>
      <span class="p">),</span>
      <span class="n">Node</span><span class="p">(</span>
         <span class="n">package</span><span class="o">=</span><span class="s1">&#39;turtle_tf2_py&#39;</span><span class="p">,</span>
         <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;turtle_tf2_listener&#39;</span><span class="p">,</span>
         <span class="n">name</span><span class="o">=</span><span class="s1">&#39;listener&#39;</span><span class="p">,</span>
         <span class="n">parameters</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;target_frame&#39;</span><span class="p">:</span> <span class="n">LaunchConfiguration</span><span class="p">(</span><span class="s1">&#39;target_frame&#39;</span><span class="p">)}</span>
         <span class="p">]</span>
      <span class="p">),</span>
   <span class="p">])</span>
</pre></div>
</div>
<p>在这个文件中，我们声明了 <code class="docutils literal notranslate"><span class="pre">target_frame</span></code> launch参数的默认值为 <code class="docutils literal notranslate"><span class="pre">turtle1</span></code> 。默认值意味着launch文件可以接收参数转发到其节点，或者如果没有提供参数，它将把默认值传递给其节点。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7271">[待校准&#64;7271]</a></p>
<p>之后，我们在launch期间使用不同的名称和参数两次使用 <code class="docutils literal notranslate"><span class="pre">turtle_tf2_broadcaster</span></code> 节点。这允许我们复制同一个节点而没有冲突。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7272">[待校准&#64;7272]</a></p>
<p>我们还启动了一个 <code class="docutils literal notranslate"><span class="pre">turtle_tf2_listener</span></code> 节点，并设置了我们在上面声明并获得的 <code class="docutils literal notranslate"><span class="pre">target_frame</span></code> 参数。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7273">[待校准&#64;7273]</a></p>
</div>
<div class="section" id="parameter-overrides">
<h3>5参数覆盖 <a class="reference external" href="http://localhost:3000/#/home?msgid=7274">[待校准&#64;7274]</a><a class="headerlink" href="#parameter-overrides" title="永久链接至标题"></a></h3>
<p>重新调用我们调用了 <code class="docutils literal notranslate"><span class="pre">broadcaster_listener.launch.py</span></code> 文件我们级launch文件。除此之外，我们通过了 <code class="docutils literal notranslate"><span class="pre">target_frame</span></code> launch的论点，如下所示: <a class="reference external" href="http://localhost:3000/#/home?msgid=7275">[待校准&#64;7275]</a></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">broadcaster_listener_nodes</span> <span class="o">=</span> <span class="n">IncludeLaunchDescription</span><span class="p">(</span>
   <span class="n">PythonLaunchDescriptionSource</span><span class="p">([</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
      <span class="n">get_package_share_directory</span><span class="p">(</span><span class="s1">&#39;launch_tutorial&#39;</span><span class="p">),</span> <span class="s1">&#39;launch&#39;</span><span class="p">),</span>
      <span class="s1">&#39;/broadcaster_listener.launch.py&#39;</span><span class="p">]),</span>
   <span class="n">launch_arguments</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;target_frame&#39;</span><span class="p">:</span> <span class="s1">&#39;carrot1&#39;</span><span class="p">}</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>
   <span class="p">)</span>
</pre></div>
</div>
<p>这种语法允许我们将默认目标帧更改为 <code class="docutils literal notranslate"><span class="pre">carrot1</span></code> 。如果你想让 <code class="docutils literal notranslate"><span class="pre">turtle2</span></code> 遵循 <code class="docutils literal notranslate"><span class="pre">turtle1</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">carrot1</span></code> ，只需去掉定义 <code class="docutils literal notranslate"><span class="pre">launch_arguments</span></code> 的线。这将为 <code class="docutils literal notranslate"><span class="pre">target_frame</span></code> 分配其默认值，即 <code class="docutils literal notranslate"><span class="pre">turtle1</span></code> 。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7276">[待校准&#64;7276]</a></p>
</div>
<div class="section" id="remapping">
<h3>6重新映射 <a class="reference external" href="http://localhost:3000/#/home?msgid=7277">[待校准&#64;7277]</a><a class="headerlink" href="#remapping" title="永久链接至标题"></a></h3>
<p>现在创建一个 <code class="docutils literal notranslate"><span class="pre">mimic.launch.py</span></code> 文件。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7278">[待校准&#64;7278]</a></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="nn">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>


<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
   <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
      <span class="n">Node</span><span class="p">(</span>
         <span class="n">package</span><span class="o">=</span><span class="s1">&#39;turtlesim&#39;</span><span class="p">,</span>
         <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;mimic&#39;</span><span class="p">,</span>
         <span class="n">name</span><span class="o">=</span><span class="s1">&#39;mimic&#39;</span><span class="p">,</span>
         <span class="n">remappings</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="s1">&#39;/input/pose&#39;</span><span class="p">,</span> <span class="s1">&#39;/turtle2/pose&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;/output/cmd_vel&#39;</span><span class="p">,</span> <span class="s1">&#39;/turtlesim2/turtle1/cmd_vel&#39;</span><span class="p">),</span>
         <span class="p">]</span>
      <span class="p">)</span>
   <span class="p">])</span>
</pre></div>
</div>
<p>该launch文件将启动 <code class="docutils literal notranslate"><span class="pre">mimic</span></code> 节点，该节点将向一个turtlesim发出命令以跟随另一个。节点被设计用来接收话题 <code class="docutils literal notranslate"><span class="pre">/input/pose</span></code> 上的目标姿势。在我们的案例中，我们想要从 <code class="docutils literal notranslate"><span class="pre">/turtle2/pose</span></code> 话题重新映射目标姿势。最后，我们将 <code class="docutils literal notranslate"><span class="pre">/output/cmd_vel</span></code> 话题重新映射到 <code class="docutils literal notranslate"><span class="pre">/turtlesim2/turtle1/cmd_vel</span></code> 。这样，我们 <code class="docutils literal notranslate"><span class="pre">turtlesim2</span></code> 仿真世界中的 <code class="docutils literal notranslate"><span class="pre">turtle1</span></code> 将在我们最初的turtlesim世界中跟随 <code class="docutils literal notranslate"><span class="pre">turtle2</span></code> 。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7279">[待校准&#64;7279]</a></p>
</div>
<div class="section" id="config-files">
<h3>7配置文件 <a class="reference external" href="http://localhost:3000/#/home?msgid=7280">[待校准&#64;7280]</a><a class="headerlink" href="#config-files" title="永久链接至标题"></a></h3>
<p>现在让我们创建一个调用ed <code class="docutils literal notranslate"><span class="pre">turtlesim_rviz.launch.py</span></code> 的文件。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7281">[待校准&#64;7281]</a></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">ament_index_python.packages</span> <span class="kn">import</span> <span class="n">get_package_share_directory</span>

<span class="kn">from</span> <span class="nn">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="nn">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>


<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
   <span class="n">rviz_config</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
      <span class="n">get_package_share_directory</span><span class="p">(</span><span class="s1">&#39;turtle_tf2_py&#39;</span><span class="p">),</span>
      <span class="s1">&#39;rviz&#39;</span><span class="p">,</span>
      <span class="s1">&#39;turtle_rviz.rviz&#39;</span>
      <span class="p">)</span>

   <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
      <span class="n">Node</span><span class="p">(</span>
         <span class="n">package</span><span class="o">=</span><span class="s1">&#39;rviz2&#39;</span><span class="p">,</span>
         <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;rviz2&#39;</span><span class="p">,</span>
         <span class="n">name</span><span class="o">=</span><span class="s1">&#39;rviz2&#39;</span><span class="p">,</span>
         <span class="n">arguments</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;-d&#39;</span><span class="p">,</span> <span class="n">rviz_config</span><span class="p">]</span>
      <span class="p">)</span>
   <span class="p">])</span>
</pre></div>
</div>
<p>这launch文件将启动RViz配置文件中定义的 <code class="docutils literal notranslate"><span class="pre">turtle_tf2_py</span></code> 包。此RViz配置将设置世界帧，启用TF可视化，并以自上而下的视图启动RViz。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7282">[待校准&#64;7282]</a></p>
</div>
<div class="section" id="environment-variables">
<h3>8环境变量 <a class="reference external" href="http://localhost:3000/#/home?msgid=7283">[待校准&#64;7283]</a><a class="headerlink" href="#environment-variables" title="永久链接至标题"></a></h3>
<p>现在，让我们在包中创建调用ed <code class="docutils literal notranslate"><span class="pre">fixed_broadcaster.launch.py</span></code> 的最后一个launch文件。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7284">[待校准&#64;7284]</a></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="nn">launch.actions</span> <span class="kn">import</span> <span class="n">DeclareLaunchArgument</span>
<span class="kn">from</span> <span class="nn">launch.substitutions</span> <span class="kn">import</span> <span class="n">EnvironmentVariable</span><span class="p">,</span> <span class="n">LaunchConfiguration</span>
<span class="kn">from</span> <span class="nn">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>


<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
   <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
      <span class="n">DeclareLaunchArgument</span><span class="p">(</span>
            <span class="s1">&#39;node_prefix&#39;</span><span class="p">,</span>
            <span class="n">default_value</span><span class="o">=</span><span class="p">[</span><span class="n">EnvironmentVariable</span><span class="p">(</span><span class="s1">&#39;USER&#39;</span><span class="p">),</span> <span class="s1">&#39;_&#39;</span><span class="p">],</span>
            <span class="n">description</span><span class="o">=</span><span class="s1">&#39;prefix for node name&#39;</span>
      <span class="p">),</span>
      <span class="n">Node</span><span class="p">(</span>
            <span class="n">package</span><span class="o">=</span><span class="s1">&#39;turtle_tf2_py&#39;</span><span class="p">,</span>
            <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;fixed_frame_tf2_broadcaster&#39;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="p">[</span><span class="n">LaunchConfiguration</span><span class="p">(</span><span class="s1">&#39;node_prefix&#39;</span><span class="p">),</span> <span class="s1">&#39;fixed_broadcaster&#39;</span><span class="p">],</span>
      <span class="p">),</span>
   <span class="p">])</span>
</pre></div>
</div>
<p>这个launch文件显示了如何在launch文件中调用环境变量。环境变量可用于定义或推送命名空间，以区分不同计算机或机器人上的节点。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7285">[待校准&#64;7285]</a></p>
</div>
</div>
<div class="section" id="running-launch-files">
<h2>运行launch文件 <a class="reference external" href="http://localhost:3000/#/home?msgid=7286">[待校准&#64;7286]</a><a class="headerlink" href="#running-launch-files" title="永久链接至标题"></a></h2>
<div class="section" id="update-setup-py">
<h3>1更新设置 <a class="reference external" href="http://localhost:3000/#/home?msgid=7287">[待校准&#64;7287]</a><a class="headerlink" href="#update-setup-py" title="永久链接至标题"></a></h3>
<p>打开 <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> 并添加以下几行，以便安装 <code class="docutils literal notranslate"><span class="pre">launch/</span></code> 文件夹中的launch文件和 <code class="docutils literal notranslate"><span class="pre">config/</span></code> 文件夹中的配置文件。 <code class="docutils literal notranslate"><span class="pre">data_files</span></code> 田现在应该是这样的: <a class="reference external" href="http://localhost:3000/#/home?msgid=7288">[待校准&#64;7288]</a></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">data_files</span><span class="o">=</span><span class="p">[</span>
      <span class="o">...</span>
      <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;share&#39;</span><span class="p">,</span> <span class="n">package_name</span><span class="p">,</span> <span class="s1">&#39;launch&#39;</span><span class="p">),</span>
         <span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;launch&#39;</span><span class="p">,</span> <span class="s1">&#39;*.launch.py&#39;</span><span class="p">))),</span>
      <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;share&#39;</span><span class="p">,</span> <span class="n">package_name</span><span class="p">,</span> <span class="s1">&#39;config&#39;</span><span class="p">),</span>
         <span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">,</span> <span class="s1">&#39;*.yaml&#39;</span><span class="p">))),</span>
   <span class="p">],</span>
</pre></div>
</div>
</div>
<div class="section" id="build-and-run">
<h3>2构建和运行 <a class="reference external" href="http://localhost:3000/#/home?msgid=7289">[待校准&#64;7289]</a><a class="headerlink" href="#build-and-run" title="永久链接至标题"></a></h3>
<p>终于看到结果代码，构建软件包和launch顶级launch文件使用以下命令: <a class="reference external" href="http://localhost:3000/#/home?msgid=7290">[待校准&#64;7290]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ros2 launch launch_tutorial launch_turtlesim.launch.py</span>
</pre></div>
</div>
<p>现在，您将看到两个turtlesim仿真已启动。第一个有两只海龟，第二个有一只。在第一次仿真中， <code class="docutils literal notranslate"><span class="pre">turtle2</span></code> 在世界的左下角产生。它的目的是达到相对于 <code class="docutils literal notranslate"><span class="pre">turtle1</span></code> 帧在x轴上5米远的 <code class="docutils literal notranslate"><span class="pre">carrot1</span></code> 帧。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7291">[待校准&#64;7291]</a></p>
<p>第二种中的 <code class="docutils literal notranslate"><span class="pre">turtlesim2/turtle1</span></code> 被设计成模仿 <code class="docutils literal notranslate"><span class="pre">turtle2</span></code> 的行为。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7292">[待校准&#64;7292]</a></p>
<p>如果要控制 <code class="docutils literal notranslate"><span class="pre">turtle1</span></code> ，请运行teleop节点。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7293">[待校准&#64;7293]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ros2 run turtlesim turtle_teleop_key</span>
</pre></div>
</div>
<p>因此，您将看到类似的图片: <a class="reference external" href="http://localhost:3000/#/home?msgid=7294">[待校准&#64;7294]</a></p>
<img alt="../../_images/turtlesim_worlds.png" src="../../_images/turtlesim_worlds.png" />
<p>除此之外，RViz应该已经开始了。它将显示所有海龟帧相对于 <code class="docutils literal notranslate"><span class="pre">world</span></code> 帧，其原点在左下角。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7295">[待校准&#64;7295]</a></p>
<img alt="../../_images/turtlesim_rviz.png" src="../../_images/turtlesim_rviz.png" />
</div>
</div>
<div class="section" id="summary">
<h2>总结 <a class="reference external" href="http://localhost:3000/#/home?msgid=6307">[待校准&#64;6307]</a><a class="headerlink" href="#summary" title="永久链接至标题"></a></h2>
<p>在本教程中，您学习了使用ROS 2launch文件管理大型项目的各种技巧和实践。 <a class="reference external" href="http://localhost:3000/#/home?msgid=7296">[待校准&#64;7296]</a></p>
</div>
</div>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Using-Event-Handlers.html" class="btn btn-neutral float-left" title="在launch文件中使用事件处理程序 [待校准@7201]" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="../Tf2/Tf2-Main.html" class="btn btn-neutral float-right" title="tf2教程 [待校准@8078]" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2022, Open Robotics.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-17821189-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-17821189-2', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>